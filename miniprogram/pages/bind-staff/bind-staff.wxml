<view class="bind-staff-page">
  <view class="header">
    <view class="title">技师身份绑定</view>
    <view class="subtitle">请输入您的员工手机号完成绑定</view>
  </view>

  <view class="content" wx:if="{{!bound}}">
    <view class="form-section">
      <view class="form-label">员工手机号</view>
      <view class="input-wrapper">
        <input
          class="phone-input"
          type="number"
          maxlength="11"
          placeholder="请输入11位手机号"
          value="{{phone}}"
          bindinput="onPhoneInput"
        />
      </view>
      <view class="hint">请输入在系统中注册的员工手机号</view>
    </view>

    <button
      class="bind-btn"
      bindtap="onBind"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      确认绑定
    </button>
  </view>

  <view class="bound-content" wx:else>
    <view class="success-icon">✓</view>
    <view class="bound-title">绑定成功</view>

    <view class="staff-card">
      <view class="card-header">员工信息</view>
      <view class="card-row">
        <view class="row-label">姓名</view>
        <view class="row-value">{{staffInfo.name}}</view>
      </view>
      <view class="card-row">
        <view class="row-label">手机号</view>
        <view class="row-value">{{staffInfo.phone}}</view>
      </view>
      <view class="card-row">
        <view class="row-label">状态</view>
        <view class="row-value status-{{staffInfo.status}}">
          {{staffInfo.status === 'active' ? '在职' : '离职'}}
        </view>
      </view>
    </view>

    <view class="hint-text">您现在可以使用技师功能了</view>

    <view class="action-buttons">
      <button
        class="unbind-btn"
        bindtap="onUnbind"
        loading="{{unbinding}}"
        disabled="{{loading || unbinding}}"
      >
        解除绑定
      </button>
      <button
        class="home-btn"
        bindtap="goToHome"
      >
        返回首页
      </button>
    </view>
  </view>

  <view class="loading-mask" wx:if="{{loading && !unbinding}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">处理中...</view>
  </view>
</view>
