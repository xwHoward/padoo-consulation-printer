<view class="screensaver-container">
  <!-- 动态光斑装饰 -->
  <view class="light-spot spot-1"></view>
  <view class="light-spot spot-2"></view>
  <view class="light-spot spot-3"></view>
  <view class="light-spot spot-4"></view>
  <view class="light-spot spot-5"></view>
  
  <view class="back-btn" bindtap="goBack">
    <text class="back-icon">✕</text>
  </view>
  <view class="content-wrapper">
    <view class="title">您好！当前门店所有技师都在忙~</view>
    <view class="tech-grid" wx:if="{{ techList.length > 0 }}">
      <view class="tech-card {{item.status}}" wx:for="{{ techList }}" wx:key="_id">
        <view class="tech-avatar">
          <image class="avatar-img" src="{{ item.avatar || '/assets/default-avatar.png' }}" mode="aspectFill" />
          <view class="status-badge {{item.status}}">
            {{ item.status === 'available' ? '空闲' : (item.status === 'busy' ? '服务中' : '已下班') }}
          </view>
        </view>
        <view class="tech-info">
          <view class="tech-name">
            {{ item.name }}
            <text wx:if="{{ item.gender === 'male'}}" class="gender-icon male">♂</text>
            <text wx:if="{{ item.gender === 'female'}}" class="gender-icon female">♀</text>
          </view>
        </view>
        <view class="available-info">
          <view class="info-label {{item.status}}" wx:if="{{ item.status === 'off_duty' }}">
            {{ item.latestAppointment }}
          </view>
          <view class="info-label available" wx:if="{{ item.status === 'available' && item.availableMinutes > 0 }}">
            {{ item.availableMinutes }}分钟后有预约
          </view>
          <view class="info-label available" wx:if="{{ item.status === 'available' && !item.availableMinutes }}">
            当前可预约
          </view>
          <view class="info-label busy" wx:if="{{ item.status === 'busy' }}">
            预计服务结束
            <view class="info-time" wx:if="{{ item.latestAppointment }}">
              {{ item.latestAppointment }}
            </view>
            <view class="info-time" wx:if="{{ item.availableMinutes }}">
              ({{ item.availableMinutes }} 分钟)
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:if="{{ techList.length === 0 && !loading }}">
      <text>当前没有在班技师</text>
    </view>
    <view class="contact-info">
      <view class="contact-label">有问题请拨打电话咨询：185 1280 6950 肖先生</view>
    </view>
  </view>
  <!-- loading遮罩 -->
  <view class="loading-mask" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">更新中...</view>
  </view>
</view>